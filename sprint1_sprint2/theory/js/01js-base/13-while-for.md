# while과 for 반복문

## while

```js
while (condition) {
  // 코드
  // '반복문 본문(body)'이라 불림
}
```

## do while

```js
do {
  // 반복문 본문
} while (condition);
```

## for

```js
for (begin; condition; step) {
  // ... 반복문 본문 ...
}
```

## 반복문 빠져나오기

`break`

## 다음 반복으로 넘어가기

`continue` 지시자는 `break`의 '가벼운 버전’입니다. `continue`는 전체 반복문을 멈추지 않습니다. 대신에 현재 실행 중인 이터레이션을 멈추고 반복문이 다음 이터레이션을 강제로 실행시키도록 합니다(조건을 통과할 때).

`continue`는 현재 반복을 종료시키고 다음 반복으로 넘어가고 싶을 때 사용할 수 있습니다.

## break/continue와 레이블

레이블(label) 은 반복문 앞에 콜론과 함께 쓰이는 식별자입니다.

```js
labelName: for (...) {
  ...
}
```

반복문 안에서 `break <labelName>`문을 사용하면 레이블에 해당하는 반복문을 빠져나올 수 있습니다.

```js
outer: for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`(${i},${j})의 값`, '');

    // 사용자가 아무것도 입력하지 않거나 Cancel 버튼을 누르면 두 반복문 모두를 빠져나옵니다.
    if (!input) break outer; // (*)

    // 입력받은 값을 가지고 무언가를 함
  }
}
alert('완료!');
```

위 예시에서 `break outer`는 `outer`라는 레이블이 붙은 반복문을 찾고, 해당 반복문을 빠져나오게 해줍니다.

따라서 제어 흐름이 `(*)`에서 `alert('완료!')`로 바로 바뀝니다.

레이블을 별도의 줄에 써주는 것도 가능합니다.

```js
outer:
for (let i = 0; i < 3; i++) { ... }
```

## 요약

지금까지 세 종류의 반복문에 대해 살펴보았습니다.

* `while` – 각 반복이 시작하기 전에 조건을 확인합니다.
* `do..while` – 각 반복이 끝난 후에 조건을 확인합니다.
* `for (;;)` – 각 반복이 시작하기 전에 조건을 확인합니다. 추가 세팅을 할 수 있습니다.

‘무한’ 반복문은 보통 `while(true)`를 써서 만듭니다. 무한 반복문은 여타 반복문과 마찬가지로 `break` 지시자를 사용해 멈출 수 있습니다.

현재 실행 중인 반복에서 더는 무언가를 하지 않고 다음 반복으로 넘어가고 싶다면 `continue` 지시자를 사용할 수 있습니다.

반복문 앞에 레이블을 붙이고, `break/continue`에 이 레이블을 함께 사용할 수 있습니다. 레이블은 중첩 반복문을 빠져나와 바깥의 반복문으로 갈 수 있게 해주는 유일한 방법입니다.

## 문제

### 1. 반복문의 마지막 값

```js
let i = 3;

while (i) {
  alert( i-- );
}
```

반복이 하나씩 끝날 때마다 i는 1씩 줄어듭니다. while(i)은 i = 0일 때 멈춥니다.

따라서 전체 반복문은 아래 순서를 따라 실행됩니다.

```js
let i = 3;

alert(i--); // 3이 출력되고 i는 2로 줄어듭니다.

alert(i--) // 2가 출력되고 i는 1로 줄어듭니다.

alert(i--) // 1이 출력되고 i는 0으로 줄어듭니다.

// i가 0이 되었기 때문에 while(i)는 종료됩니다.
```

### 2. while 반복문의 출력값 예상하기

1. 전위형 증가 연산자를 사용한 경우엔 **1부터 4까지** 출력됩니다.

```js
let i = 0;
while (++i < 5) alert( i );
```

2. 후위형 증가 연산자를 사용한 경우엔 **1부터 5까지** 출력됩니다.

```js
let i = 0;
while (i++ < 5) alert( i );
```

### 3. 'for' 반복문의 출력값 예상하기

두 경우 모두 **0부터 4까지** 출력됩니다.

```js
for (let i = 0; i < 5; ++i) alert( i );

for (let i = 0; i < 5; i++) alert( i );
```

for문의 알고리즘을 떠올려보면 쉽게 추론할 수 있는 문제입니다.

1. 모든 작업이 시작되기 전 일단 i = 0입니다.
2. i < 5 조건을 만족하는지 확인합니다.
3. 위 조건이 true이면 반복문의 본문 alert(i)가 실행되고, 그 이후 i++가 실행됩니다.

i++는 위 알고리즘의 두 번째 단계(조건 확인)와 별개로 실행됩니다. 전혀 다른 구문이기 때문이죠.

증가 연산자가 반환하는 값은 (2) 에서 쓰이지 않기 때문에 i++와 ++i에 차이가 없습니다.

### 4. for 반복문을 이용하여 짝수 출력하기

```js
for (let i = 2; i <= 10; i++) {
  if (i % 2 == 0) {
    alert( i );
  }
}
```

나머지 연산자 `%`를 사용하면 짝수인지를 확인할 수 있습니다.

### 5. 'for' 반복문을 'while' 반복문으로 바꾸기

```js
for (let i = 0; i < 3; i++) {
  alert( `number ${i}!` );
}

let i = 0;
while (i < 3) {
  alert( `number ${i}!` );
  i++;
}
```

### 6. 사용자가 유효한 값을 입력할 때까지 프롬프트 창 띄우기

사용자가 100보다 큰 숫자를 입력하도록 안내하는 프롬프트 창을 띄워보세요. 사용자가 조건에 맞지 않은 값을 입력한 경우 반복문을 사용해 동일한 프롬프트 창을 띄워줍시다.

사용자가 100을 초과하는 숫자를 입력하거나 취소 버튼을 누른 경우, 혹은 아무것도 입력하지 않고 확인 버튼을 누른 경우엔 더는 프롬프트 창을 띄워주지 않아도 됩니다.

사용자가 오직 숫자만 입력한다고 가정하고 답안을 작성하도록 해봅시다. 숫자가 아닌 값이 입력되는 예외 상황은 처리하지 않아도 됩니다.

```js
let num;

do {
  num = prompt("100을 초과하는 숫자를 입력해주세요.", 0);
} while (num <= 100 && num);
```

`do..while`반복문을 사용해 아래 두 조건이 모두 truthy인 경우 프롬프트 창이 뜨게 하면 됩니다.

`num <= 100`인지 확인하기. 100보다 작거나 같은 값을 입력한 경우 프롬프트 창이 떠야 합니다.
`num`이 `null`이나 빈 문자열인지 확인하기. `num`이 `null`이나 빈 문자열이면 `&& num`이 거짓이 되므로 `while` 반복문이 종료됩니다.
참고: `num`이 `null`인 경우 `num <= 100`은 `true`가 되므로 두 번째 조건이 없으면 취소 버튼을 눌러도 반복문이 계속해서 실행됩니다. 따라서 위 두 조건을 모두 확인해야 합니다.

### 7. 소수 출력하기

**2부터 n까지의 숫자 중 소수만 출력해주는 코드를 작성해봅시다.**

```js
let n = 10;

nextPrime:
for (let i = 2; i <= n; i++) { // 각 i에 대하여 반복문을 돌림

  for (let j = 2; j < i; j++) { // 제수(나눗수)를 찾음
    if (i % j == 0) continue nextPrime; // 소수가 아니므로 다음 i로 넘어감
  }

  alert( i ); // 소수
}
```

위에서 사용한 알고리즘은 최적화할 부분이 많습니다. 

제수를 **2와 i의 제곱근** 사이에서 찾으면 좀 더 나아지겠죠. 

아주 큰 n에 대해서 **이차 체(Quadratic sieve)**나 **수 체(General number field sieve)**와 같이 좀 더 어려운 수학과 복잡한 알고리즘을 이용해 소수 검색 알고리즘을 개선할 수 있을 겁니다